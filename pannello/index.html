<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pannello di Controllo - Prenotazioni</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body class="bg-slate-100">

    <!-- Header -->
    <header class="bg-white shadow-sm">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <h1 class="text-xl font-bold text-slate-800">Pannello di Controllo</h1>
                <div class="text-sm text-slate-600">
                    Benvenuto, Ristorante "Il Goloso"
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto p-4 sm:p-6 lg:p-8">
        <div class="mb-8">
            <h2 class="text-2xl font-bold text-slate-900">Prenotazioni in Arrivo</h2>
            <p class="text-slate-600 mt-1">Gestisci le richieste di prenotazione dei tuoi clienti.</p>
        </div>

        <!-- Contenitore delle Prenotazioni -->
        <div class="bg-white rounded-lg shadow overflow-hidden">
            <ul id="booking-list" class="divide-y divide-slate-200">
                <!-- Le prenotazioni verranno inserite qui da JavaScript -->
            </ul>
        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // --- Dati di Esempio ---
            // In un'applicazione reale, questi dati arriverebbero da un database.
            const initialBookings = [
                { id: 1, name: 'Mario Rossi', people: 4, date: '2025-07-05', time: '20:30', status: 'pending' },
                { id: 2, name: 'Laura Bianchi', people: 2, date: '2025-07-05', time: '21:00', status: 'pending' },
                { id: 3, name: 'Giulia Verdi', people: 6, date: '2025-07-06', time: '13:00', status: 'confirmed' },
                { id: 4, name: 'Marco Neri', people: 3, date: '2025-07-06', time: '19:45', status: 'cancelled' },
                { id: 5, name: 'Paolo Gialli', people: 2, date: '2025-07-07', time: '12:30', status: 'pending' },
            ];

            let bookings = [...initialBookings];
            const bookingList = document.getElementById('booking-list');

            // --- Funzioni ---

            // Funzione per generare l'HTML di una singola prenotazione
            function createBookingHtml(booking) {
                let statusBadge;
                let actionButtons;

                switch (booking.status) {
                    case 'pending':
                        statusBadge = `<span class="px-2 py-1 text-xs font-semibold text-yellow-800 bg-yellow-100 rounded-full">In attesa</span>`;
                        actionButtons = `
                            <button data-id="${booking.id}" data-action="confirm" class="confirm-btn bg-green-500 text-white text-sm font-bold py-1 px-3 rounded-lg hover:bg-green-600 transition">Conferma</button>
                            <button data-id="${booking.id}" data-action="cancel" class="cancel-btn bg-red-500 text-white text-sm font-bold py-1 px-3 rounded-lg hover:bg-red-600 transition ml-2">Cancella</button>
                        `;
                        break;
                    case 'confirmed':
                        statusBadge = `<span class="px-2 py-1 text-xs font-semibold text-green-800 bg-green-100 rounded-full">Confermata</span>`;
                        actionButtons = `<button data-id="${booking.id}" data-action="cancel" class="cancel-btn bg-slate-400 text-white text-sm font-bold py-1 px-3 rounded-lg hover:bg-slate-500 transition ml-2">Annulla</button>`;
                        break;
                    case 'cancelled':
                        statusBadge = `<span class="px-2 py-1 text-xs font-semibold text-red-800 bg-red-100 rounded-full">Cancellata</span>`;
                        actionButtons = ``;
                        break;
                }

                return `
                    <li class="p-4 sm:p-6 hover:bg-slate-50 transition">
                        <div class="flex items-center justify-between flex-wrap">
                            <div class="w-full sm:w-auto mb-4 sm:mb-0">
                                <p class="font-bold text-lg text-slate-800">${booking.name}</p>
                                <p class="text-slate-600 text-sm">
                                    ${booking.people} persone &bull; ${new Date(booking.date).toLocaleDateString('it-IT', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })} alle ${booking.time}
                                </p>
                            </div>
                            <div class="flex items-center">
                                <div class="mr-4">${statusBadge}</div>
                                <div>${actionButtons}</div>
                            </div>
                        </div>
                    </li>
                `;
            }

            // Funzione per renderizzare tutte le prenotazioni
            function renderBookings() {
                bookingList.innerHTML = ''; // Pulisce la lista
                // Ordina le prenotazioni: prima quelle in attesa, poi le altre
                const sortedBookings = bookings.sort((a, b) => {
                    if (a.status === 'pending' && b.status !== 'pending') return -1;
                    if (a.status !== 'pending' && b.status === 'pending') return 1;
                    return 0;
                });
                sortedBookings.forEach(booking => {
                    bookingList.innerHTML += createBookingHtml(booking);
                });
            }

            // --- Gestione Eventi ---

            bookingList.addEventListener('click', function(event) {
                const target = event.target;
                const bookingId = parseInt(target.dataset.id);
                const action = target.dataset.action;

                if (!bookingId || !action) return;

                const bookingIndex = bookings.findIndex(b => b.id === bookingId);
                if (bookingIndex === -1) return;

                if (action === 'confirm') {
                    bookings[bookingIndex].status = 'confirmed';
                } else if (action === 'cancel') {
                    bookings[bookingIndex].status = 'cancelled';
                }

                // Rirenderizza la lista per mostrare l'aggiornamento
                renderBookings();
            });

            // --- Inizializzazione ---
            renderBookings();
        });
    </script>

</body>
</html>
